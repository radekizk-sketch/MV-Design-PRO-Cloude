{
  "$schema": "ports-schema.json",
  "$version": "1.0.0",
  "$description": "Port definitions for ETAP-parity SLD symbols. All coordinates are relative to viewBox 100x100.",
  "symbols": {
    "busbar": {
      "description": "Szyna zbiorcza / Busbar",
      "viewBox": "0 0 100 100",
      "ports": {
        "left": { "x": 0, "y": 50 },
        "right": { "x": 100, "y": 50 }
      },
      "allowedRotations": [0, 90],
      "defaultRotation": 0
    },
    "circuit_breaker": {
      "description": "Wyłącznik / Circuit Breaker",
      "viewBox": "0 0 100 100",
      "ports": {
        "top": { "x": 50, "y": 0 },
        "bottom": { "x": 50, "y": 100 }
      },
      "allowedRotations": [0, 90, 180, 270],
      "defaultRotation": 0
    },
    "disconnector": {
      "description": "Rozłącznik / Disconnector",
      "viewBox": "0 0 100 100",
      "ports": {
        "top": { "x": 50, "y": 0 },
        "bottom": { "x": 50, "y": 100 }
      },
      "allowedRotations": [0, 90, 180, 270],
      "defaultRotation": 0
    },
    "line_overhead": {
      "description": "Linia napowietrzna / Overhead Line",
      "viewBox": "0 0 100 100",
      "ports": {
        "left": { "x": 0, "y": 50 },
        "right": { "x": 100, "y": 50 }
      },
      "allowedRotations": [0, 90],
      "defaultRotation": 0,
      "style": {
        "strokeDasharray": "none",
        "lineType": "solid"
      }
    },
    "line_cable": {
      "description": "Linia kablowa / Cable Line",
      "viewBox": "0 0 100 100",
      "ports": {
        "left": { "x": 0, "y": 50 },
        "right": { "x": 100, "y": 50 }
      },
      "allowedRotations": [0, 90],
      "defaultRotation": 0,
      "style": {
        "strokeDasharray": "8,4",
        "lineType": "dashed"
      }
    },
    "transformer_2w": {
      "description": "Transformator 2-uzwojeniowy / 2-Winding Transformer",
      "viewBox": "0 0 100 100",
      "ports": {
        "top": { "x": 50, "y": 0 },
        "bottom": { "x": 50, "y": 100 }
      },
      "allowedRotations": [0, 90, 180, 270],
      "defaultRotation": 0
    },
    "transformer_3w": {
      "description": "Transformator 3-uzwojeniowy / 3-Winding Transformer",
      "viewBox": "0 0 100 100",
      "ports": {
        "top": { "x": 50, "y": 0 },
        "left": { "x": 0, "y": 62 },
        "right": { "x": 100, "y": 62 }
      },
      "allowedRotations": [0],
      "defaultRotation": 0,
      "notes": "Rotation limited due to asymmetric port layout"
    },
    "generator": {
      "description": "Generator synchroniczny / Synchronous Generator",
      "viewBox": "0 0 100 100",
      "ports": {
        "bottom": { "x": 50, "y": 100 }
      },
      "allowedRotations": [0, 90, 180, 270],
      "defaultRotation": 0
    },
    "pv": {
      "description": "Fotowoltaika / Photovoltaic",
      "viewBox": "0 0 100 100",
      "ports": {
        "bottom": { "x": 50, "y": 100 }
      },
      "allowedRotations": [0],
      "defaultRotation": 0,
      "notes": "Rotation limited - sun arrow must point to panel"
    },
    "fw": {
      "description": "Farma wiatrowa / Wind Farm",
      "viewBox": "0 0 100 100",
      "ports": {
        "bottom": { "x": 50, "y": 100 }
      },
      "allowedRotations": [0],
      "defaultRotation": 0,
      "notes": "Rotation limited - turbine orientation is standard"
    },
    "bess": {
      "description": "Magazyn energii / Battery Energy Storage System",
      "viewBox": "0 0 100 100",
      "ports": {
        "bottom": { "x": 50, "y": 100 }
      },
      "allowedRotations": [0, 180],
      "defaultRotation": 0,
      "notes": "180° rotation swaps +/- polarity visually"
    },
    "utility_feeder": {
      "description": "Zasilanie z sieci / Utility Feeder",
      "viewBox": "0 0 100 100",
      "ports": {
        "bottom": { "x": 50, "y": 100 }
      },
      "allowedRotations": [0],
      "defaultRotation": 0,
      "notes": "Rotation limited - arrows must point down toward network"
    },
    "ground": {
      "description": "Uziemienie / Ground",
      "viewBox": "0 0 100 100",
      "ports": {
        "top": { "x": 50, "y": 0 }
      },
      "allowedRotations": [0],
      "defaultRotation": 0,
      "notes": "Rotation not allowed - ground symbol must point down"
    },
    "ct": {
      "description": "Przekładnik prądowy / Current Transformer",
      "viewBox": "0 0 100 100",
      "ports": {
        "left": { "x": 0, "y": 50 },
        "right": { "x": 100, "y": 50 }
      },
      "allowedRotations": [0, 90],
      "defaultRotation": 0
    },
    "vt": {
      "description": "Przekładnik napięciowy / Voltage Transformer",
      "viewBox": "0 0 100 100",
      "ports": {
        "left": { "x": 0, "y": 50 },
        "right": { "x": 100, "y": 50 }
      },
      "allowedRotations": [0, 90],
      "defaultRotation": 0
    }
  },
  "portTransformations": {
    "description": "How to transform port coordinates for rotations",
    "rotation_90": {
      "formula": "new_x = 100 - y, new_y = x",
      "portMapping": {
        "top": "right",
        "right": "bottom",
        "bottom": "left",
        "left": "top"
      }
    },
    "rotation_180": {
      "formula": "new_x = 100 - x, new_y = 100 - y",
      "portMapping": {
        "top": "bottom",
        "right": "left",
        "bottom": "top",
        "left": "right"
      }
    },
    "rotation_270": {
      "formula": "new_x = y, new_y = 100 - x",
      "portMapping": {
        "top": "left",
        "right": "top",
        "bottom": "right",
        "left": "bottom"
      }
    }
  }
}
